void main() {
  print("=== üèóÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á (Construction Store) üèóÔ∏è ===\n");

  // 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡πà‡∏≤‡∏á‡πÜ (Polymorphism)
  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏π‡∏ô‡∏ã‡∏µ‡πÄ‡∏°‡∏ô‡∏ï‡πå)
  StructuralMaterial cement = StructuralMaterial(
    id: "MAT-001",
    name: "‡∏õ‡∏π‡∏ô‡∏ã‡∏µ‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ñ‡∏∏‡∏á (50‡∏Å‡∏Å.)",
    price: 145,
    weightKg: 50.0,
  );

  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ä‡πà‡∏≤‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏ß‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤)
  PowerTool drill = PowerTool(
    id: "TOOL-999",
    name: "‡∏™‡∏ß‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏¢",
    price: 2500,
    warrantyMonths: 12,
  );

  // 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
  // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Encapsulation & Setter (‡∏•‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏¥‡∏î‡∏•‡∏ö)
  print("--- üõ† ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Validation) ---");
  cement.price = -20; // ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Error
  cement.price = 139; // ‡∏õ‡∏£‡∏±‡∏ö‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)

  // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Method ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠
  print("\n--- üîß ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ ---");
  drill.testTool();

  // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Polymorphism loop)
  print("\n--- üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ---");
  List<Product> inventory = [cement, drill];

  for (var product in inventory) {
    product.displayDetails(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏ò‡∏≠‡∏î‡∏ó‡∏µ‡πà Override ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏•‡∏π‡∏Å
    print(""); 
  }
}

// ==========================================
// 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Class ‡πÅ‡∏°‡πà (Parent Class)
// ==========================================
class Product {
  String id;
  String name;
  
  // 2. ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢ Private (_) (Encapsulation)
  double _price; 

  Product({
    required this.id, 
    required this.name, 
    required double price
  }) : _price = price;

  // 3. Getter/Setter
  double get price => _price;

  set price(double newPrice) {
    if (newPrice > 0) {
      double diff = _price - newPrice;
      _price = newPrice;
      print("‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤ $name ‡πÄ‡∏õ‡πá‡∏ô ${_formatMoney(_price)} ‡∏ö‡∏≤‡∏ó (‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á ${diff.abs()} ‡∏ö‡∏≤‡∏ó)");
    } else {
      print("‚ùå [Error] ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏•‡∏ö! (‡∏Ñ‡∏∏‡∏ì‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏™‡πà: $newPrice)");
    }
  }

  // Method ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
  void displayDetails() {
    print("‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô");
    print("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: $name");
    print("‡∏£‡∏≤‡∏Ñ‡∏≤: ${_formatMoney(_price)} ‡∏ö‡∏≤‡∏ó");
  }

  // Helper function ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô
  String _formatMoney(double amount) {
    return amount.toStringAsFixed(0).replaceAllMapped(
        RegExp(r'(\d{1,3})(?=(\d{3})+(?!\d))'), (Match m) => '${m[1]},');
  }
}

// ==========================================
// 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Class ‡∏•‡∏π‡∏Å (Inheritance) - ‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
// ==========================================
class StructuralMaterial extends Product {
  double weightKg; // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

  StructuralMaterial({
    required String id,
    required String name,
    required double price,
    required this.weightKg,
  }) : super(id: id, name: name, price: price);

  @override
  void displayDetails() {
    print("üß± [‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏´‡∏ô‡∏±‡∏Å]");
    print("‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: $id");
    print("‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: $name");
    print("‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢: ${price} ‡∏ö‡∏≤‡∏ó");
    print("‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°: $weightKg ‡∏Å‡∏Å.");
    print("‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å");
  }
}

// ==========================================
// 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Class ‡∏•‡∏π‡∏Å (Inheritance) - ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ä‡πà‡∏≤‡∏á
// ==========================================
class PowerTool extends Product {
  int warrantyMonths; // ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)

  PowerTool({
    required String id,
    required String name,
    required double price,
    required this.warrantyMonths,
  }) : super(id: id, name: name, price: price);

  // Method ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠
  void testTool() {
    print("‚öôÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≠‡∏á $name... ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Normal)");
  }

  @override
  void displayDetails() {
    print("üß∞ [‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå]");
    print("‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: $id");
    print("‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: $name");
    print("‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢: ${price} ‡∏ö‡∏≤‡∏ó");
    print("‡∏£‡∏∞‡∏¢‡∏∞‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô: $warrantyMonths ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô");
    print("‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á: ‡πÅ‡∏û‡πá‡∏Ñ‡∏•‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å");
  }
}